# Linux命令集合

### 常用

- 查看端口号占用状况

```bash
> lsof -i :[port]
```

- 查询ip

```bash
> ifconfig -a
# 或者
> homename -I
```


### chmod 777 目录/文件

表示所有用户都对指定的目录/文件有可读可写可执行的权限

> Linux系统中，用户分为：文件所有者、群组用户、其他用户，3个数据分别对应3种用户的权限

|权限	|权限数值	|二进制	|具体作用|
|-|-|-|-|
|r|4|00000100|read，读取。当前用户可以读取文件内容，当前用户可以浏览目录。|
|w|2|00000010|write，写入。当前用户可以新增或修改文件内容，当前用户可以删除、移动目录或目录内文件。|
|x|1|00000001|execute，执行。当前用户可以执行文件，当前用户可以进入目录。|

> 依照上面的表格，权限组合就是对应权限值求和，如下：

- 7 = 4 + 2 + 1      读写运行权限
- 5 = 4 + 1          读和运行权限
- 4 = 4              只读权限


### cp -rfv path1/* path2

功能: 复制文件或目录
说明: cp指令用于复制文件或目录，如同时指定两个以上的文件或目录，且最后的目的地是一个已经存在的目录，则它会把前面指定的所有文件或目录复制到此目录中。若同时指定多个文件或目录，而最后的目的地并非一个已存在的目录，则会出现错误信息.

#### 语法

cp (选项) (参数)

#### 选项

|-|-|
|-|-|
|-a 或 --archive |此参数的效果和同时指定"-dpR"参数相同|
|-b 或 --backup |删除、覆盖目的文件先备份，备份的文件或目录亦建立为符号链接，并指向源文件或目录链接的源文件或目录。假如没有加上这个参数，在复制过程中若遇到符号链接，则会直接复制源文件或目录|
|-f 或 --force |强行复制文件或目录， 不论目的文件或目录是否已经存在|
|-i 或 --interactive |覆盖文件之前先询问用户|
|-l 或 --link |对源文件建立硬链接，而非复制文件|
|-p 或 --preserve |保留源文件或目录的属性，包括所有者、所属组、权限与时间|
|-P 或 --parents |保留源文件或目录的路径，此路径可以是绝对路径或相对路径，且目的目录必须已经存在|
|-r |递归处理，将指定目录下的文件与子目录一并处理。若源文件或目录的形态，不属于目录或符号链接，则一律视为普通文件处理|
|-R 或 --recursive |递归处理，将指定目录下的文件及子目录一并处理|
|-s 或 --symbolic-link |对源文件建立符号链接，而非复制文件
|-S <备份字尾字符串> 或 --suffix=<备份字尾字符串> |用"-b"参数备份目的文件后，备份文件的字尾会被加上一个备份字符串。默认的备份字尾符串是符号"~"|
|-u 或 --update |使用这项参数之后，只会在源文件的修改时间(Modification Time)较目的文件更新时，或是名称相互对应的目的文件并不存在，才复制文件|
|-v 或 --verbose |显示执行过程|
|-V <备份方式> 或 --version-control=<备份方式> |指定当备份文件时，备份文件名的命名方式，有以下3种:<br>- numbered或t, 将使用备份编号，会在字尾加上~1~字符串，其数字编号依次递增<br>- simple或never 将使用简单备份，默认的备份字尾字符串是~, 也可通过-S来指定<br>- existing或nil将使用当前方式，程序会先检查是否存在着备份编号，若有则采用备份编号，若无则采用简单备份|
|-x 或 --one-file-system |复制的文件或目录存放的文件系统，必须与cp指令执行时所处的文件系统相同，否则不复制，亦不处理位于其他分区的文件|
|--help |显示在线帮助|
|--sparse=<使用时机> |设置保存希疏文件的时机|
|--version |显示版本|

#### 示例

- 复制文件，只有源文件较目的文件的修改时间新时，才复制文件

```base 
  cp -u -v file1 file2
```

- 将文件file1复制成文件file2

```base 
  cp file1 file2
```

- 采用交互方式将文件file1复制成文件file2

```base 
 cp -i file1 file2
```

- 将文件file1复制成file2，因为目的文件已经存在，所以指定使用强制复制的模式

```base 
  cp -f file1 file2
```

- 将目录dir1复制成目录dir2

```base 
  cp -R file1 file2
```
- 同时将文件file1、file2、file3与目录dir1复制到dir2

```base 
  cp -R file1 file2 file3 dir1 dir2
```

- 复制时保留文件属性

```base 
  cp -p a.txt tmp/
```
- 复制时保留文件的目录结构

```base 
  cp -P  /var/tmp/a.txt  ./temp/
```

- 复制时产生备份文件

```base 
  cp -b a.txt tmp/
```

- 复制时产生备份文件，尾标 ~1~格式

```base 
  cp -b -V t  a.txt /tmp
```

- 指定备份文件尾标

```base 
  cp -b -S _bak a.txt /tmp
```


### 查看log文件内容

linux查看日志文件内容命令tail、cat、tac、head、echo

#### tail

```bash
tail -f test.log
```

你会看到屏幕不断有内容被打印出来. 这时候中断第一个进程Ctrl-C,

#### linux 如何显示一个文件的某几行(中间几行)

从第3000行开始，显示1000行。即显示3000~3999行

```bash
cat filename | tail -n +3000 | head -n 1000
```

显示1000行到3000行

```bash
cat filename| head -n 3000 | tail -n +1000
```

#### 注意两种方法的顺序

分解：

- tail -n 1000：显示最后1000行
- tail -n +1000：从1000行开始显示，显示1000行以后的
- head -n 1000：显示前面1000行

用sed命令
sed -n '5,10p' filename 这样你就可以只查看文件的第5行到第10行。

例：cat mylog.log | tail -n 1000 #输出mylog.log 文件最后一千行

 
cat主要有三大功能：
1.一次显示整个文件。$ cat filename
2.从键盘创建一个文件。$ cat > filename 
只能创建新文件,不能编辑已有文件.
3.将几个文件合并为一个文件： $cat file1 file2 > file
参数：
-n 或 --number 由 1 开始对所有输出的行数编号
-b 或 --number-nonblank 和 -n 相似，只不过对于空白行不编号
-s 或 --squeeze-blank 当遇到有连续两行以上的空白行，就代换为一行的空白行
-v 或 --show-nonprinting
例：
把 textfile1 的档案内容加上行号后输入 textfile2 这个档案里
cat -n textfile1 > textfile2

把 textfile1 和 textfile2 的档案内容加上行号（空白行不加）之后将内容附加到 textfile3 里。
cat -b textfile1 textfile2 >> textfile3

把test.txt文件扔进垃圾箱，赋空值test.txt
cat /dev/null > /etc/test.txt 
注意：>意思是创建，>>是追加。千万不要弄混了。
------------------------------------------
tac (反向列示)
tac 是将 cat 反写过来，所以他的功能就跟 cat 相反， cat 是由第一行到最后一行连续显示在萤幕上，
而 tac 则是由最后一行到第一行反向在萤幕上显示出来！

------------------------------------------
在Linux中echo命令用来在标准输出上显示一段字符，比如：
echo "the echo command test!"

这个就会输出“the echo command test!”这一行文字！

echo "the echo command test!">a.sh
这个就会在a.sh文件中输出“the echo command test!”这一行文字！ 
该命令的一般格式为： echo [ -n ] 字符串其中选项n表示输出文字后不换行；字符串能加引号，也能不加引号。
用echo命令输出加引号的字符串时，将字符串原样输出；
用echo命令输出不加引号的字符串时，将字符串中的各个单词作为字符串输出，各字符串之间用一个空格分割。